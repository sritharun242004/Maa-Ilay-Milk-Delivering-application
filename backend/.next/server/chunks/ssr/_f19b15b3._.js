module.exports=[210,a=>{"use strict";let b=(0,a.i(70106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},92e3,a=>{"use strict";let b=(0,a.i(70106).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],92e3)},38262,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(33217),e=a.i(70025),f=a.i(37927),g=a.i(210),h=a.i(41675),i=a.i(33441),j=a.i(33508),k=a.i(92e3),l=a.i(50944);a.i(11909);var m=a.i(91119),n=a.i(99570),o=a.i(10962),p=a.i(21007),q=a.i(68114),r=a.i(6704);function s(){let a=(0,l.useRouter)(),s=(0,f.useQueryClient)(),[t,u]=(0,c.useState)([]),{data:v,isLoading:w}=(0,d.useQuery)({queryKey:["pause-status"],queryFn:async()=>{let a=await fetch("/api/customer/pause");if(!a.ok)throw Error("Failed to fetch");return a.json()}}),x=(0,e.useMutation)({mutationFn:async a=>{let b=await fetch("/api/customer/pause",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dates:a})});if(!b.ok)throw Error((await b.json()).error);return b.json()},onSuccess:()=>{r.default.success("Delivery paused successfully"),s.invalidateQueries({queryKey:["pause-status"]}),u([])},onError:a=>{r.default.error(a.message)}}),y=(0,e.useMutation)({mutationFn:async a=>{let b=await fetch(`/api/customer/pause?date=${a}`,{method:"DELETE"});if(!b.ok)throw Error((await b.json()).error);return b.json()},onSuccess:()=>{r.default.success("Pause cancelled"),s.invalidateQueries({queryKey:["pause-status"]})},onError:a=>{r.default.error(a.message)}});if(w)return(0,b.jsx)(o.SectionLoader,{});let z=v?.data,A=z?.remainingPauseDays||0,B=z?.upcomingPauses||[],C=new Date(z?.earliestPausableDate),D=(0,q.getISTDate)(),E=(0,q.getMonthDates)(D.getFullYear(),D.getMonth()+1),F=(0,q.getMonthDates)(D.getFullYear(),D.getMonth()+2),G=(a,c)=>{let d=Array(a[0].getDay()).fill(null);return(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h3",{className:"font-semibold text-neutral-900 mb-3",children:c}),(0,b.jsx)("div",{className:"grid grid-cols-7 gap-1 text-center text-xs text-neutral-500 mb-2",children:["S","M","T","W","T","F","S"].map((a,c)=>(0,b.jsx)("div",{className:"py-1",children:a},c))}),(0,b.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[d.map((a,c)=>(0,b.jsx)("div",{},`empty-${c}`)),a.map(a=>{let c=a<C,d=B.some(b=>(0,q.isSameDay)(new Date(b.pauseDate),a)),e=t.some(b=>(0,q.isSameDay)(b,a)),f=(0,q.isSameDay)(a,D);return(0,b.jsx)("button",{onClick:()=>(a=>{if(a<C)return;let b=t.some(b=>(0,q.isSameDay)(b,a));if(!B.some(b=>(0,q.isSameDay)(new Date(b.pauseDate),a)))if(b)u(t.filter(b=>!(0,q.isSameDay)(b,a)));else{if(t.length+z.pauseDaysUsed>=p.MAX_PAUSE_DAYS_PER_MONTH)return void r.default.error(`You can only pause ${p.MAX_PAUSE_DAYS_PER_MONTH} days per month`);u([...t,a])}})(a),disabled:c||d,className:`
                  aspect-square rounded-lg text-sm font-medium transition-all
                  ${c?"text-neutral-300 cursor-not-allowed":""}
                  ${d?"bg-amber-100 text-amber-700":""}
                  ${e?"bg-primary-600 text-white":""}
                  ${!c&&!d&&!e?"hover:bg-neutral-100":""}
                  ${f&&!d&&!e?"ring-2 ring-primary-300":""}
                `,children:a.getDate()},a.toISOString())})]})]})};return(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,b.jsx)("button",{onClick:()=>a.back(),className:"h-10 w-10 flex items-center justify-center rounded-xl bg-neutral-100",children:(0,b.jsx)(g.ArrowLeft,{className:"h-5 w-5"})}),(0,b.jsx)("h1",{className:"text-xl font-bold text-neutral-900",children:"Pause Delivery"})]}),(0,b.jsx)(m.Card,{className:"mb-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-neutral-500",children:"Pause days remaining"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-neutral-900",children:[A," ",(0,b.jsxs)("span",{className:"text-base font-normal text-neutral-500",children:["/ ",p.MAX_PAUSE_DAYS_PER_MONTH]})]})]}),(0,b.jsx)(h.Calendar,{className:"h-8 w-8 text-primary-600"})]})}),(0,b.jsx)(m.Card,{className:"mb-4 bg-blue-50 border-blue-200",children:(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(k.AlertCircle,{className:"h-5 w-5 text-blue-600 shrink-0 mt-0.5"}),(0,b.jsxs)("div",{className:"text-sm text-blue-700",children:[(0,b.jsx)("p",{className:"font-medium mb-1",children:"Important"}),(0,b.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,b.jsx)("li",{children:"Changes must be made before 5 PM the previous day"}),(0,b.jsxs)("li",{children:["You can pause up to ",p.MAX_PAUSE_DAYS_PER_MONTH," days per month"]}),(0,b.jsx)("li",{children:"Pause days don't carry forward to next month"})]})]})]})}),B.length>0&&(0,b.jsxs)(m.Card,{className:"mb-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-neutral-900 mb-3",children:"Upcoming Pauses"}),(0,b.jsx)("div",{className:"space-y-2",children:B.map(a=>{let c=new Date(a.pauseDate),d=c>=C;return(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-amber-50 rounded-xl",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(h.Calendar,{className:"h-5 w-5 text-amber-600"}),(0,b.jsx)("span",{className:"font-medium text-amber-800",children:(0,q.formatDateShort)(a.pauseDate)})]}),d&&a.createdByCustomer&&(0,b.jsx)("button",{onClick:()=>y.mutate(c.toISOString().split("T")[0]),className:"h-8 w-8 flex items-center justify-center rounded-lg bg-amber-100 text-amber-700 hover:bg-amber-200",children:(0,b.jsx)(j.X,{className:"h-4 w-4"})})]},a.id)})})]}),(0,b.jsxs)(m.Card,{className:"mb-4",children:[(0,b.jsx)("p",{className:"text-sm text-neutral-500 mb-4",children:"Tap on dates to select. Yellow dates are already paused."}),G(E,D.toLocaleString("default",{month:"long",year:"numeric"})),G(F,new Date(D.getFullYear(),D.getMonth()+1).toLocaleString("default",{month:"long",year:"numeric"}))]}),t.length>0&&(0,b.jsx)("div",{className:"fixed bottom-20 left-0 right-0 p-4 bg-gradient-to-t from-background via-background to-transparent",children:(0,b.jsxs)(n.Button,{onClick:()=>{let a=t.map(a=>a.toISOString().split("T")[0]);x.mutate(a)},loading:x.isPending,fullWidth:!0,size:"lg",children:[(0,b.jsx)(i.Check,{className:"h-5 w-5"}),"Pause ",t.length," Day",t.length>1?"s":""]})})]})}a.s(["default",()=>s])}];

//# sourceMappingURL=_f19b15b3._.js.map