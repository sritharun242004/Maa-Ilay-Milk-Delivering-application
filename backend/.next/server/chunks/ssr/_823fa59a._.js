module.exports=[15618,a=>{"use strict";let b=(0,a.i(70106).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},92e3,a=>{"use strict";let b=(0,a.i(70106).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],92e3)},42581,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(33217),e=a.i(70025),f=a.i(37927),g=a.i(41675),h=a.i(15618);let i=(0,a.i(70106).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var j=a.i(92e3),k=a.i(33508),l=a.i(68114),m=a.i(6704);function n(){return(0,b.jsx)("div",{className:"p-6 lg:p-8",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,b.jsx)("div",{className:"h-8 w-48 bg-gray-200 rounded-lg animate-pulse"}),(0,b.jsx)("div",{className:"space-y-4",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:"h-24 bg-white rounded-2xl animate-pulse"},a))})]})})}function o(){let a=(0,f.useQueryClient)(),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(""),{data:u,isLoading:v}=(0,d.useQuery)({queryKey:["holidays"],queryFn:async()=>{let a=await fetch("/api/admin/holidays");if(!a.ok)throw Error("Failed to fetch");return a.json()}}),w=(0,e.useMutation)({mutationFn:async()=>{let a=await fetch("/api/admin/holidays",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:q,reason:s})});if(!a.ok)throw Error((await a.json()).error);return a.json()},onSuccess:b=>{m.default.success(`Holiday created. ${b.data.affectedCustomers} customers affected.`),a.invalidateQueries({queryKey:["holidays"]}),p(!1),r(""),t("")},onError:a=>{m.default.error(a.message)}}),x=(0,e.useMutation)({mutationFn:async a=>{let b=await fetch(`/api/admin/holidays?date=${a}`,{method:"DELETE"});if(!b.ok)throw Error((await b.json()).error);return b.json()},onSuccess:()=>{m.default.success("Holiday removed"),a.invalidateQueries({queryKey:["holidays"]})},onError:a=>{m.default.error(a.message)}});if(v)return(0,b.jsx)(n,{});let y=u?.data?.holidays||[],z=new Date;z.setDate(z.getDate()+1);let A=z.toISOString().split("T")[0];return(0,b.jsx)("div",{className:"p-6 lg:p-8",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Holidays"}),(0,b.jsx)("p",{className:"text-gray-500 mt-1",children:"Manage delivery holidays for all customers"})]}),(0,b.jsxs)("button",{onClick:()=>p(!0),className:"inline-flex items-center gap-2 px-5 py-2.5 bg-slate-900 text-white font-medium rounded-xl hover:bg-slate-800 transition-colors",children:[(0,b.jsx)(h.Plus,{className:"w-5 h-5"}),"Add Holiday"]})]}),o&&(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:()=>p(!1)}),(0,b.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-xl w-full max-w-md mx-4 p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Declare Holiday"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Pause delivery for all customers"})]}),(0,b.jsx)("button",{onClick:()=>p(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,b.jsx)(k.X,{className:"w-5 h-5 text-gray-500"})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-xl",children:(0,b.jsxs)("div",{className:"flex gap-3 text-amber-800 text-sm",children:[(0,b.jsx)(j.AlertCircle,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),(0,b.jsx)("p",{children:"Customers won't be charged for this day, and no deliveries will be scheduled."})]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Date"}),(0,b.jsx)("input",{type:"date",value:q,onChange:a=>r(a.target.value),min:A,className:"w-full h-11 px-4 border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Reason"}),(0,b.jsx)("input",{type:"text",value:s,onChange:a=>t(a.target.value),placeholder:"e.g., Festival, Maintenance",className:"w-full h-11 px-4 border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,b.jsx)("button",{onClick:()=>p(!1),className:"flex-1 h-11 px-4 border border-gray-200 rounded-xl font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,b.jsx)("button",{onClick:()=>w.mutate(),disabled:!q||!s||w.isPending,className:"flex-1 h-11 px-4 bg-slate-900 text-white rounded-xl font-medium hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:w.isPending?"Creating...":"Declare Holiday"})]})]})]}),0===y.length?(0,b.jsx)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-12",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(g.Calendar,{className:"w-8 h-8 text-gray-400"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"No upcoming holidays"}),(0,b.jsx)("p",{className:"text-gray-500 mb-6",children:"Declare holidays to pause deliveries for all customers on specific dates"}),(0,b.jsxs)("button",{onClick:()=>p(!0),className:"inline-flex items-center gap-2 px-5 py-2.5 bg-slate-900 text-white font-medium rounded-xl hover:bg-slate-800 transition-colors",children:[(0,b.jsx)(h.Plus,{className:"w-4 h-4"}),"Add Holiday"]})]})}):(0,b.jsx)("div",{className:"space-y-4",children:y.map(a=>{let c=new Date(a.date),d=c<new Date;return(0,b.jsx)("div",{className:`bg-white rounded-2xl border border-gray-200 shadow-sm p-5 ${d?"opacity-60":""}`,children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-5",children:[(0,b.jsxs)("div",{className:"w-16 h-16 bg-red-50 border border-red-200 rounded-2xl flex flex-col items-center justify-center flex-shrink-0",children:[(0,b.jsx)("span",{className:"text-xs text-red-600 font-semibold uppercase",children:c.toLocaleString("default",{month:"short"})}),(0,b.jsx)("span",{className:"text-2xl font-bold text-red-700",children:c.getDate()})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:a.reason}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:[(0,l.formatDate)(a.date)," Â· ",c.toLocaleString("default",{weekday:"long"})]})]})]}),!d&&(0,b.jsx)("button",{onClick:()=>{confirm("Remove this holiday? Deliveries will be scheduled again.")&&x.mutate(c.toISOString().split("T")[0])},className:"p-2.5 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:(0,b.jsx)(i,{className:"w-5 h-5"})})]})},a.id)})})]})})}a.s(["default",()=>o],42581)}];

//# sourceMappingURL=_823fa59a._.js.map