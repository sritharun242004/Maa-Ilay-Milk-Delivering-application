module.exports=[15618,a=>{"use strict";let b=(0,a.i(70106).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},77156,a=>{"use strict";let b=(0,a.i(70106).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],77156)},41379,a=>{"use strict";let b=(0,a.i(70106).default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);a.s(["EyeOff",()=>b],41379)},69520,a=>{"use strict";let b=(0,a.i(70106).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>b],69520)},25080,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(33217),e=a.i(70025),f=a.i(37927),g=a.i(15618),h=a.i(10227),i=a.i(63519),j=a.i(60246);let k=(0,a.i(70106).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var l=a.i(77156),m=a.i(41379),n=a.i(69520),o=a.i(33508),p=a.i(68114),q=a.i(6704);function r(){let a=(0,f.useQueryClient)(),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)({name:"",phone:"",zone:"",password:(0,p.generatePassword)(8)}),{data:z,isLoading:A}=(0,d.useQuery)({queryKey:["delivery-persons"],queryFn:async()=>{let a=await fetch("/api/admin/delivery-persons");if(!a.ok)throw Error("Failed to fetch");return a.json()}}),B=(0,e.useMutation)({mutationFn:async()=>{let a=await fetch("/api/admin/delivery-persons",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(!a.ok)throw Error((await a.json()).error);return a.json()},onSuccess:()=>{q.default.success("Delivery person created"),a.invalidateQueries({queryKey:["delivery-persons"]}),s(!1),q.default.custom(a=>(0,b.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-lg border border-gray-200 max-w-sm",children:[(0,b.jsx)("p",{className:"font-semibold mb-2 text-gray-900",children:"Credentials Created"}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Phone: ",x.phone]}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Password: ",x.password]}),(0,b.jsx)("p",{className:"text-xs text-amber-600 mt-2",children:"Save these credentials - password won't be shown again!"}),(0,b.jsx)("button",{className:"mt-2 px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 rounded-lg",onClick:()=>q.default.dismiss(a.id),children:"Dismiss"})]}),{duration:15e3}),D()},onError:a=>{q.default.error(a.message)}}),C=(0,e.useMutation)({mutationFn:async a=>{let b=await fetch(`/api/admin/delivery-persons/${a.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.updates)});if(!b.ok)throw Error((await b.json()).error);return b.json()},onSuccess:()=>{q.default.success("Updated successfully"),a.invalidateQueries({queryKey:["delivery-persons"]}),u(null)},onError:a=>{q.default.error(a.message)}}),D=()=>{y({name:"",phone:"",zone:"",password:(0,p.generatePassword)(8)})},E=z?.data?.deliveryPersons||[];return(0,b.jsx)("div",{className:"p-6 lg:p-8",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Delivery Team"}),(0,b.jsx)("p",{className:"text-gray-500 mt-1",children:"Manage delivery person accounts and assignments"})]}),(0,b.jsxs)("button",{onClick:()=>{D(),s(!0)},className:"inline-flex items-center gap-2 px-5 py-2.5 bg-slate-900 text-white font-medium rounded-xl hover:bg-slate-800 transition-colors",children:[(0,b.jsx)(g.Plus,{className:"w-5 h-5"}),"Add Person"]})]}),r&&(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:()=>s(!1)}),(0,b.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-xl w-full max-w-md mx-4 p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Add Delivery Person"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Share credentials after creation"})]}),(0,b.jsx)("button",{onClick:()=>s(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,b.jsx)(o.X,{className:"w-5 h-5 text-gray-500"})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Full Name"}),(0,b.jsx)("input",{type:"text",value:x.name,onChange:a=>y({...x,name:a.target.value}),placeholder:"Enter full name",className:"w-full h-11 px-4 border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Phone Number"}),(0,b.jsx)("input",{type:"text",value:x.phone,onChange:a=>y({...x,phone:a.target.value}),placeholder:"10-digit phone number",className:"w-full h-11 px-4 border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This will be used as their login username"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Zone/Area"}),(0,b.jsx)("input",{type:"text",value:x.zone,onChange:a=>y({...x,zone:a.target.value}),placeholder:"e.g., Pondicherry Central",className:"w-full h-11 px-4 border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Password"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)("input",{type:v?"text":"password",value:x.password,onChange:a=>y({...x,password:a.target.value}),className:"w-full h-11 px-4 pr-10 border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"}),(0,b.jsx)("button",{type:"button",onClick:()=>w(!v),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:v?(0,b.jsx)(m.EyeOff,{className:"w-4 h-4"}):(0,b.jsx)(l.Eye,{className:"w-4 h-4"})})]}),(0,b.jsx)("button",{type:"button",onClick:()=>y({...x,password:(0,p.generatePassword)(8)}),className:"w-11 h-11 flex items-center justify-center border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors",title:"Generate new password",children:(0,b.jsx)(n.RefreshCw,{className:"w-4 h-4 text-gray-600"})})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,b.jsx)("button",{onClick:()=>s(!1),className:"flex-1 h-11 px-4 border border-gray-200 rounded-xl font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,b.jsx)("button",{onClick:()=>B.mutate(),disabled:!x.name||!x.phone||!x.password||B.isPending,className:"flex-1 h-11 px-4 bg-slate-900 text-white rounded-xl font-medium hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:B.isPending?"Creating...":"Create"})]})]})]}),A?(0,b.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:"h-56 bg-white rounded-2xl animate-pulse"},a))}):0===E.length?(0,b.jsx)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-12",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(h.Truck,{className:"w-8 h-8 text-gray-400"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"No delivery persons yet"}),(0,b.jsx)("p",{className:"text-gray-500 mb-6",children:"Add your first delivery person to get started"}),(0,b.jsxs)("button",{onClick:()=>{D(),s(!0)},className:"inline-flex items-center gap-2 px-5 py-2.5 bg-slate-900 text-white font-medium rounded-xl hover:bg-slate-800 transition-colors",children:[(0,b.jsx)(g.Plus,{className:"w-4 h-4"}),"Add First Person"]})]})}):(0,b.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map(a=>(0,b.jsx)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden",children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-14 h-14 bg-emerald-100 rounded-2xl flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(h.Truck,{className:"w-7 h-7 text-emerald-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900 text-lg",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a.zone||"No zone assigned"})]})]}),(0,b.jsx)("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold ${a.isActive?"bg-emerald-100 text-emerald-800":"bg-red-100 text-red-800"}`,children:a.isActive?"Active":"Inactive"})]}),(0,b.jsxs)("div",{className:"space-y-3 mb-5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[(0,b.jsx)(i.Phone,{className:"w-4 h-4 text-gray-400"}),(0,b.jsx)("span",{children:(0,p.formatPhone)(a.phone)})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[(0,b.jsx)(j.Users,{className:"w-4 h-4 text-gray-400"}),(0,b.jsxs)("span",{children:[a._count?.customers||0," customers assigned"]})]})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:()=>{C.mutate({id:a.id,updates:{isActive:!a.isActive}})},className:"flex-1 h-10 px-4 border border-gray-200 rounded-xl text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:a.isActive?"Deactivate":"Activate"}),(0,b.jsx)("button",{onClick:()=>u(t===a.id?null:a.id),className:"w-10 h-10 flex items-center justify-center border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors",children:(0,b.jsx)(k,{className:"w-4 h-4 text-gray-600"})})]}),t===a.id&&(0,b.jsxs)("div",{className:"mt-5 pt-5 border-t border-gray-200 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Name"}),(0,b.jsx)("input",{id:`name-${a.id}`,type:"text",defaultValue:a.name,className:"w-full h-10 px-3 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Zone"}),(0,b.jsx)("input",{id:`zone-${a.id}`,type:"text",defaultValue:a.zone,className:"w-full h-10 px-3 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"New Password (optional)"}),(0,b.jsx)("input",{id:`password-${a.id}`,type:"password",placeholder:"Leave blank to keep current",className:"w-full h-10 px-3 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:()=>{let b=document.getElementById(`name-${a.id}`).value,c=document.getElementById(`zone-${a.id}`).value,d=document.getElementById(`password-${a.id}`).value;C.mutate({id:a.id,updates:{name:b,zone:c,...d&&{password:d}}})},disabled:C.isPending,className:"flex-1 h-10 px-4 bg-slate-900 text-white rounded-lg text-sm font-medium hover:bg-slate-800 disabled:opacity-50 transition-colors",children:C.isPending?"Saving...":"Save"}),(0,b.jsx)("button",{onClick:()=>u(null),className:"h-10 px-4 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"})]})]})]})},a.id))})]})})}a.s(["default",()=>r],25080)}];

//# sourceMappingURL=_8153722e._.js.map